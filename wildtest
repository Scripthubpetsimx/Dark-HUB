-- Load Luna UI Library
local success, Luna = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebula-Softworks/Luna-Interface-Suite/main/source.lua"))()
end)

if not success or not Luna then
    warn("Failed to load Luna UI Library")
    return
end

-- Create main window with proper configuration
local Window = Luna:CreateWindow({
    Name = "EXECUTIVERAT IN THE SEWER",
    Subtitle = "Snatched Scripts - Summer Event",
    LogoID = nil,
    LoadingEnabled = true,
    LoadingTitle = "EXECUTIVERAT",
    LoadingSubtitle = "Loading premium features...",
    ConfigSettings = {
        ConfigFolder = "ExecutiveRatConfig",
        AutoSave = false
    },
    KeySystem = false
})

-- Function to create Loader Tab
local function createLoaderTab()
    local LoaderTab = Window:CreateTab({
        Name = "Loader",
        Icon = "rbxassetid://7733955741"
    })

    -- Add buttons to LoaderTab
    LoaderTab:CreateButton({
        Name = "No-Lag OFFICIAL v1",
        Description = "Load No-Lag v1 script",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/main/Loader/LoaderV1.lua"))()
        end
    })

    LoaderTab:CreateButton({
        Name = "No-Lag OFFICIAL v2",
        Description = "Load No-Lag v2 script",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/main/Loader/LoaderV2.lua"))()
        end
    })

    LoaderTab:CreateButton({
        Name = "No-Lag OFFICIAL v3",
        Description = "Load No-Lag v3 script",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/main/Loader/LoaderV3.lua"))()
        end
    })

    LoaderTab:CreateButton({
        Name = "Aussie-WIRE",
        Description = "Load Aussie-WIRE script",
        Callback = function()
            loadstring(game:HttpGet("https://scriptblox.com/raw/Grow-a-Garden-Aussie-WIRE-vs-GrowAGarden-42380"))()
        end
    })
    
    return LoaderTab
end

-- Function to create DUPE/VULN Tab
local function createDupeTab()
    local DupeTab = Window:CreateTab({
        Name = "DUPE/VULN",
        Icon = "rbxassetid://7734068321"
    })

    local keyVerified = false
    local correctKey = "EXECUTIVERAT_FREE_aMB0Ts12s4gjaivmr_var111113321321123"
    local keyInput = ""
    local keyElements = {}
    local dupeElements = {}

    -- Key UI Section
    keyElements.copyBtn = DupeTab:CreateButton({
        Name = "Copy Key Link",
        Description = "Get your access key",
        Callback = function()
            setclipboard("https://link-center.net/431614/EQVrnV89bzeb")
            Window:CreateNotification({
                Title = "COPIED",
                Content = "Key link copied to clipboard!",
                Duration = 3
            })
        end
    })

    keyElements.input = DupeTab:CreateInput({
        Name = "Enter Key",
        Placeholder = "Paste key here",
        Callback = function(value)
            keyInput = value
        end
    })

    keyElements.submitBtn = DupeTab:CreateButton({
        Name = "Submit Key",
        Description = "Verify your access",
        Callback = function()
            if keyInput == correctKey then
                keyVerified = true
                Window:CreateNotification({
                    Title = "SUCCESS",
                    Content = "Key accepted! Loading DUPE/VULN features...",
                    Duration = 3
                })
                loadDupeFeatures()
            else
                Window:CreateNotification({
                    Title = "ERROR",
                    Content = "Invalid key!",
                    Duration = 3
                })
            end
        end
    })

    -- Function to create DUPE features after key verification
    local function loadDupeFeatures()
        if not keyVerified then return end
        
        -- Hide key elements
        keyElements.copyBtn:Destroy()
        keyElements.input:Destroy()
        keyElements.submitBtn:Destroy()
        
        -- VULN Features
        dupeElements.label1 = DupeTab:CreateLabel({
            Text = "Skip Craft Time (PATCHED)",
            Style = 2  -- Warning style
        })
        
        dupeElements.label2 = DupeTab:CreateLabel({
            Text = "Skip Seed Time (PATCHED)",
            Style = 2
        })
        
        dupeElements.eggESP = DupeTab:CreateButton({
            Name = "Egg ESP",
            Description = "Locate special eggs",
            Callback = function() end
        })
        
        -- Egg Finder Dropdown
        local eggOptions = {
            "Raccoon (Night Egg)", 
            "Disco Bee (Anti Bee Egg)", 
            "Butterfly (Anti Bee Egg)", 
            "Queen Bee (Bee Egg)", 
            "Red Fox (Mythical Egg)", 
            "Mimic Octopus (Paradise Egg)"
        }
        
        dupeElements.eggDropdown = DupeTab:CreateDropdown({
            Name = "Egg Finder",
            Description = "Select egg to locate",
            Options = eggOptions,
            CurrentOption = eggOptions[1],
            MultipleOptions = false,
            Callback = function(selected)
                Window:CreateNotification({
                    Title = "TARGET SET",
                    Content = "Finding: "..selected,
                    Duration = 3
                })
            end
        })
        
        dupeElements.eggHop = DupeTab:CreateButton({
            Name = "Egg Hop", 
            Description = "Find servers with eggs",
            Callback = function()
                Window:CreateNotification({
                    Title = "EGG HOP",
                    Content = "Searching for egg servers...",
                    Duration = 3
                })
            end
        })
        
        -- DUPE Execution Section
        dupeElements.dupeLabel = DupeTab:CreateLabel({
            Text = "DUPE -",
            Style = 1  -- Header style
        })
        
        local petOptions = {
            "Raccoon", 
            "Disco Bee", 
            "Butterfly", 
            "Queen Bee", 
            "Red Fox", 
            "Mimic Octopus"
        }
        local selectedPet = petOptions[1]
        
        dupeElements.petDropdown = DupeTab:CreateDropdown({
            Name = "Select Pet",
            Description = "Choose pet to duplicate",
            Options = petOptions,
            CurrentOption = petOptions[1],
            MultipleOptions = false,
            Callback = function(selection)
                selectedPet = selection
            end
        })
        
        local petSize, petAge = 1, 1
        dupeElements.sizeInput = DupeTab:CreateInput({
            Name = "Size (Number)",
            Placeholder = "Enter size value",
            Callback = function(value)
                petSize = tonumber(value) or 1
            end
        })
        
        dupeElements.ageInput = DupeTab:CreateInput({
            Name = "Age (Number)",
            Placeholder = "Enter age value",
            Callback = function(value)
                petAge = tonumber(value) or 1
            end
        })
        
        dupeElements.executeBtn = DupeTab:CreateButton({
            Name = "Execute Dupe",
            Description = "Start duplication process",
            Callback = function()
                if selectedPet == "" then
                    Window:CreateNotification({
                        Title = "ERROR",
                        Content = "Select a pet first!",
                        Duration = 3
                    })
                    return
                end
                Window:CreateNotification({
                    Title = "DUPE STARTED",
                    Content = string.format("Duping %s (Size: %d, Age: %d)", selectedPet, petSize, petAge),
                    Duration = 5
                })
            end
        })
        
        -- Status message
        dupeElements.compatibility = DupeTab:CreateLabel({
            Text = "Server Dupe Compatibility: Not Compatible",
            Style = 2
        })
        
        -- Steal Fruits Section
        dupeElements.stealLabel = DupeTab:CreateLabel({
            Text = "Steal Others Fruit",
            Style = 1
        })
        
        local stealUsername = ""
        dupeElements.stealInput = DupeTab:CreateInput({
            Name = "Username",
            Placeholder = "Enter username to steal from",
            Callback = function(value)
                stealUsername = value
            end
        })
        
        dupeElements.whitelistBtn1 = DupeTab:CreateButton({
            Name = "Whitelist User",
            Description = "Add user to safe list",
            Callback = function()
                if stealUsername ~= "" then
                    Window:CreateNotification({
                        Title = "WHITELISTED",
                        Content = "Added "..stealUsername.." to whitelist",
                        Duration = 3
                    })
                end
            end
        })
        
        -- Shovel Section
        dupeElements.shovelLabel = DupeTab:CreateLabel({
            Text = "Shovel Other Garden Fruits",
            Style = 1
        })
        
        local shovelUsername = ""
        dupeElements.shovelInput = DupeTab:CreateInput({
            Name = "Username",
            Placeholder = "Enter username to shovel",
            Callback = function(value)
                shovelUsername = value
            end
        })
        
        dupeElements.whitelistBtn2 = DupeTab:CreateButton({
            Name = "Whitelist User",
            Description = "Add user to safe list",
            Callback = function()
                if shovelUsername ~= "" then
                    Window:CreateNotification({
                        Title = "WHITELISTED",
                        Content = "Added "..shovelUsername.." to whitelist",
                        Duration = 3
                    })
                end
            end
        })
        
        -- Teleport Button
        dupeElements.teleportBtn = DupeTab:CreateButton({
            Name = "Teleport to EASTER SHOP",
            Description = "Go to special event location",
            Callback = function()
                Window:CreateNotification({
                    Title = "TELEPORTING",
                    Content = "Teleporting to Easter Shop...",
                    Duration = 3
                })
            end
        })
        
        -- Status Message
        dupeElements.status = DupeTab:CreateLabel({
            Text = "STATUS: ALL VULN SCRIPTS PATCHED - DUPE COMING TONIGHT",
            Style = 2
        })
    end
    
    return DupeTab
end

-- Function to create Animations Tab
local function createAnimationsTab()
    local AnimTab = Window:CreateTab({
        Name = "Animations",
        Icon = "rbxassetid://7733684335"
    })

    -- Keyboard Animation
    AnimTab:CreateButton({
        Name = "Keyboard",
        Description = "Load keyboard animation",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/advxzivhsjjdhxhsidifvsh/mobkeyboard/main/main.txt"))()
        end
    })

    -- UFWboo Tool with Luna dialog warning
    AnimTab:CreateButton({
        Name = "UFWboo Tool",
        Description = "Tool animation package",
        Callback = function()
            Window:CreateDialog({
                Title = "WARNING",
                Content = "You have granted a Tool Animation, check your Inventory",
                Buttons = {
                    {
                        Text = "PROCEED",
                        Callback = function()
                            loadstring(game:HttpGet("https://raw.githubusercontent.com/LolnotaKid/SCRIPTSBYVEUX/main/UFWboo.txt"))()
                        end
                    },
                    {
                        Text = "CANCEL",
                        Callback = function()
                            Window:CreateNotification({
                                Title = "CANCELLED",
                                Content = "Action aborted",
                                Duration = 2
                            })
                        end
                    }
                }
            })
        end
    })

    -- Killer Animation
    AnimTab:CreateButton({
        Name = "Killer Animation",
        Description = "Load killer animation",
        Callback = function()
            loadstring(game:HttpGet("https://pastefy.app/riYch0rX/raw"))()
        end
    })

    -- Psycho Animation
    AnimTab:CreateButton({
        Name = "Psycho Animation",
        Description = "Load psycho animation",
        Callback = function()
            loadstring(game:HttpGet("https://pastefy.app/YJITpCRA/raw"))()
        end
    })

    -- TROLL TAB with warning
    AnimTab:CreateButton({
        Name = "TROLL TAB",
        Description = "Special effects animation",
        Callback = function()
            Window:CreateDialog({
                Title = "TROLL WARNING",
                Content = "This animation may cause unexpected effects!",
                Buttons = {
                    {
                        Text = "I UNDERSTAND",
                        Callback = function()
                            loadstring(game:HttpGet("https://raw.githubusercontent.com/p0e1/1/main/Fe%20R6%20Animation"))()
                        end
                    },
                    {
                        Text = "CANCEL",
                        Callback = function() end
                    }
                }
            })
        end
    })

    -- Revenge Hands with warning
    AnimTab:CreateButton({
        Name = "Revenge Hands",
        Description = "Visual effect package",
        Callback = function()
            Window:CreateDialog({
                Title = "WARNING",
                Content = "Revenge Hands may cause visual glitches!",
                Buttons = {
                    {
                        Text = "PROCEED",
                        Callback = function()
                            loadstring(game:HttpGet("https://raw.githubusercontent.com/Scripthubpetsimx/guiscript/main/reevenge%20hands.txt"))()
                        end
                    },
                    {
                        Text = "CANCEL",
                        Callback = function() end
                    }
                }
            })
        end
    })
    
    return AnimTab
end

-- Create all tabs
createLoaderTab()
createDupeTab()
createAnimationsTab()

-- Initialize UI
Window:Initialize()

-- Initial notification
Window:CreateNotification({
    Title = "EXECUTIVERAT",
    Content = "Snatched Scripts - Summer Event Script 9999+ points",
    Duration = 5
})
